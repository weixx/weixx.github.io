!function(o){$(document).ready(function(){t.footerStay(),t.backToTop(),t.navAnimation(),t.toc(),t.mobileNavbar(),t.fancybox()});var t={};t.footerStay=function(){var t=$(o),n=$(".page>.container");t.width()<=800&&n.css({minHeight:n.height()<t.height()?t.height():n.height()})},t.backToTop=function(){var t=$("#back-to-top");$(o).scroll(function(){$(o).scrollTop()>1e3?t.show():t.hide()}),t.click(function(){$("body,html").animate({scrollTop:0})})},t.toc=function(){var t=$(".post-toc"),n=$(".post-footer");if(t.length){var e=t.offset().top,i=n.offset().top-t.height(),c={start:{position:"absolute",top:e-340},process:{position:"fixed",top:100},end:{position:"absolute",top:i-340}};$(o).scroll(function(){var n=$(o).scrollTop()+80;n<e?t.css(c.start):n>i?t.css(c.end):t.css(c.process)})}var a=$(".toc-link"),l=$(".headerlink"),s=$.map(l,function(o){return $(o).offset().top});$(o).scroll(function(){for(var t=$(o).scrollTop(),n=0;n<a.length;n++){var e=n+1===a.length,i=s[n]-30,c=e?1/0:s[n+1]-30;i<t&&t<=c?$(a[n]).addClass("active"):$(a[n]).removeClass("active")}})},t.throttle=function(o,t,n){var e,i=new Date;return function(){var c=arguments,a=new Date;clearTimeout(e),a-i>=n?(o.apply(this,c),i=a):e=setTimeout(o,t)}},t.navAnimation=function(){var n=0,e=0,i=$(".site-nav");$(".mobile-header");$(o).scroll(t.throttle(function(){$(o).width()>900&&((e=$(this).scrollTop())>n?i.fadeOut(500):i.fadeIn(500),n=e)},50,500))},t.mobileNavbar=function(){var o=$("#mobile-nav-toggle"),t=($(".mobile-header"),new Slideout({panel:document.getElementById("mobile-nav-panel"),menu:document.getElementById("mobile-nav-menu"),padding:180,tolerance:70}));t.disableTouch(),o.click(function(){t.toggle()}),t.on("beforeopen",function(){$("#mobile-nav-toggle").attr("class","iconfont icon-turnoff")}),t.on("beforeclose",function(){$("#mobile-nav-toggle").attr("class","iconfont icon-turnon")}),$("#mobile-nav-panel").on("touchend",function(){t.isOpen()&&o.click()})},t.fancybox=function(){$.fancybox&&($(".post").each(function(){$(this).find("img").each(function(){$(this).wrap('<a class="fancybox" href="'+this.src+'" title="'+this.alt+'"></a>')})}),$(".fancybox").fancybox({openEffect:"elastic",closeEffect:"elastic",closeBtn:!1,helpers:{title:{type:"outside"}}}))},o.myFunc=t}(window);